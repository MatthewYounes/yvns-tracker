<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>YVNS | Lift & Fuel Tracker</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="YVNS">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.png">

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="main-page" class="glass-container">
        
        <header>
            <h1 class="yvns-main">YVNS</h1>
            <div class="yvns-slogan">YOUR VICTORY NEEDS SACRIFICE</div>
            
            <div class="meta-row">
                <div id="live-clock">00:00</div>
                <div class="divider-vert">|</div>
                <div id="current-date">Loading...</div>
            </div>

            <div class="tab-row">
                <button class="tab-btn active" onclick="switchTab('tracker')">LOG</button>
                <button class="tab-btn" onclick="switchTab('nutrition')">FUEL</button>
                <button class="tab-btn" onclick="switchTab('calculator')">LOADOUT</button>
                <button class="tab-btn" onclick="switchTab('history')">HISTORY</button>
            </div>
        </header>

        <div id="tab-tracker" class="tab-content active-tab">
            <div class="glass-panel">
                <div class="input-grid">
                    <div class="full-width">
                        <label>Category</label>
                        <select id="equipment" onchange="updateUI()">
                            <option value="Barbell">Barbell</option>
                            <option value="Dumbbell">Dumbbell</option>
                            <option value="Machine">Machine</option>
                            <option value="Cable">Cable</option>
                            <option value="Smith Machine">Smith Machine</option>
                            <option value="Bodyweight">Bodyweight</option>
                            <option value="Cardio">Cardio</option>
                            <option value="Abs">Ab Circuit</option>
                        </select>
                    </div>

                    <div class="full-width">
                        <label>Primary Movement</label>
                        <input type="text" id="exercise" list="exercise-list" placeholder="Select or Type..." oninput="autoSaveDraft()">
                        <datalist id="exercise-list"></datalist>
                    </div>

                    <div>
                        <label id="lbl-weight">Weight (lbs)</label>
                        <input type="number" id="input-1" placeholder="0" oninput="autoSaveDraft()">
                    </div>
                    <div>
                        <label id="lbl-reps">Reps</label>
                        <input type="number" id="input-2" placeholder="0" oninput="autoSaveDraft()">
                    </div>

                    <div id="ss-container" class="full-width ss-hidden">
                        <div class="ss-connector"><i class="fas fa-link"></i> LINKED SUPERSET</div>
                        <div class="ss-input-block">
                            <label>Secondary Movement</label>
                            <input type="text" id="exercise-ss" list="exercise-list" placeholder="Pairing..." oninput="autoSaveDraft()">
                            <div class="ss-stats-grid">
                                <div><label>Weight</label><input type="number" id="input-1-ss" placeholder="0" oninput="autoSaveDraft()"></div>
                                <div><label>Reps</label><input type="number" id="input-2-ss" placeholder="0" oninput="autoSaveDraft()"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-row">
                    <button id="ss-toggle-btn" class="toggle-btn" onclick="toggleSS()">+ SS MODE</button>
                    <button class="action-btn add-btn" onclick="addToSession()">LOG SET</button>
                </div>
            </div>

            <div class="session-container">
                <div class="section-header">
                    <h3>CURRENT SESSION</h3>
                    <span class="count-badge" id="set-count">0</span>
                </div>
                <ul id="session-list"><li class="empty-state">Start lifting...</li></ul>
            </div>

            <div class="controls-grid">
                <button class="action-btn finish-btn" onclick="finishWorkout()">FINISH & SAVE</button>
                <button class="secondary-btn" onclick="showExportPage()"><i class="fas fa-cog"></i></button>
            </div>
        </div>

        <div id="tab-nutrition" class="tab-content">
            <div class="glass-panel">
                <div class="input-grid">
                    <div class="full-width">
                        <label>Meal / Item</label>
                        <input type="text" id="macro-item" placeholder="e.g. Post-Workout Shake">
                    </div>
                    <div>
                        <label>Calories</label>
                        <input type="number" id="macro-cals" placeholder="0">
                    </div>
                    <div>
                        <label>Protein (g)</label>
                        <input type="number" id="macro-pro" placeholder="0">
                    </div>
                    <div>
                        <label>Carbs (g)</label>
                        <input type="number" id="macro-crb" placeholder="0">
                    </div>
                    <div>
                        <label>Fats (g)</label>
                        <input type="number" id="macro-fat" placeholder="0">
                    </div>
                </div>
                <div class="action-row" style="grid-template-columns: 1fr; margin-top:15px;">
                    <button class="action-btn add-btn" onclick="logMacro()">LOG FUEL</button>
                </div>
            </div>

            <div class="session-container">
                <div class="section-header">
                    <h3>TODAY'S INTAKE</h3>
                </div>
                <div class="macro-totals-grid">
                    <div class="m-box"><div class="m-val" id="tot-cals">0</div><div class="m-lbl">CALS</div></div>
                    <div class="m-box"><div class="m-val" id="tot-pro">0</div><div class="m-lbl">PRO</div></div>
                    <div class="m-box"><div class="m-val" id="tot-crb">0</div><div class="m-lbl">CRB</div></div>
                    <div class="m-box"><div class="m-val" id="tot-fat">0</div><div class="m-lbl">FAT</div></div>
                </div>
                <div class="divider" style="margin: 15px 0;"></div>
                <ul id="macro-list"><li class="empty-state">No fuel logged yet...</li></ul>
            </div>

            <div class="controls-grid">
                <button class="action-btn finish-btn" onclick="finishNutritionDay()">FINISH DAY & SAVE</button>
                <button class="secondary-btn" onclick="showExportPage()"><i class="fas fa-cog"></i></button>
            </div>
        </div>

        <div id="tab-calculator" class="tab-content">
            <div class="glass-panel calc-panel">
                <div class="total-display">
                    <span id="calc-total">45</span><small>LBS</small>
                </div>
                <div class="plate-visualizer">
                    <div class="plate-side left" id="bar-plates-left"></div>
                    <div class="bar-shaft-center"></div>
                    <div class="plate-side right" id="bar-plates-right"></div>
                </div>
                <div class="bar-toggle-row">
                    <button class="bar-select active-bar" id="btn-bar-45" onclick="setBarWeight(45)">BARBELL (45)</button>
                    <button class="bar-select" id="btn-bar-25" onclick="setBarWeight(25)">SMITH (25)</button>
                </div>
                <div class="plate-bank">
                    <button class="plate-btn p-45" onclick="addPlate(45)">45</button>
                    <button class="plate-btn p-35" onclick="addPlate(35)">35</button>
                    <button class="plate-btn p-25" onclick="addPlate(25)">25</button>
                    <button class="plate-btn p-10" onclick="addPlate(10)">10</button>
                    <button class="plate-btn p-5" onclick="addPlate(5)">5</button>
                    <button class="plate-btn p-25s" onclick="addPlate(2.5)">2.5</button>
                </div>
                <div class="divider"></div>
                <div class="reverse-calc">
                    <div class="calc-input-row">
                        <input type="number" id="target-weight" placeholder="Target Weight (e.g. 225)">
                        <button class="calc-action-btn" onclick="calculateLoadout()">LOAD</button>
                    </div>
                </div>
                <button class="reset-bar-btn" onclick="resetBar()">RESET BAR</button>
            </div>
        </div>

        <div id="tab-history" class="tab-content">
            <div class="bar-toggle-row" style="margin-bottom: 15px;">
                <button class="bar-select active-bar" id="btn-hist-lifts" onclick="switchHistory('lifts')">LIFTS</button>
                <button class="bar-select" id="btn-hist-fuel" onclick="switchHistory('fuel')">FUEL</button>
            </div>
            <div id="history-feed" class="history-list">
                <div class="empty-state">No history found.</div>
            </div>
        </div>

    </div>

    <div id="export-page" class="glass-container" style="display: none;">
        <header>
            <h1 class="yvns-main" style="font-size:32px;">DATA MANAGEMENT</h1>
            <p class="yvns-slogan" style="color:#666;">EXPORT PERFORMANCE METRICS</p>
        </header>

        <div class="glass-panel menu-panel">
            <div class="extraction-grid">
                <button class="extract-btn" onclick="copyForSheets()">
                    <div class="ex-icon"><i class="fas fa-dumbbell"></i></div>
                    <div class="ex-label">COPY LIFTS (SHEETS)</div>
                </button>
                <button class="extract-btn" onclick="copyMacrosForSheets()">
                    <div class="ex-icon"><i class="fas fa-fire"></i></div>
                    <div class="ex-label">COPY FUEL (SHEETS)</div>
                </button>
                <button class="extract-btn" onclick="exportCSV()">
                    <div class="ex-icon"><i class="fas fa-download"></i></div>
                    <div class="ex-label">DOWNLOAD LIFTS CSV</div>
                </button>
            </div>
            
            <div class="divider"></div>

            <button class="menu-action-btn delete-btn" onclick="wipeAllData()">
                WIPE ALL HISTORY
            </button>
        </div>
        
        <button class="menu-action-btn back-btn" onclick="showMainPage()">RETURN TO TRACKER</button>
    </div>

    <script src="script.js"></script>
    <div class="fab-container">
        <button class="fab-btn" onclick="openModal('timer-modal')"><i class="fas fa-stopwatch"></i></button>
        <button class="calc-fab-btn" onclick="openModal('calc-modal')"><i class="fas fa-calculator"></i></button>
    </div>

    <div id="timer-modal" class="modal-overlay" style="display:none;">
        <div class="glass-panel modal-panel">
            <div class="modal-header">
                <h2>REST TIMER</h2>
                <button class="close-btn" onclick="closeModal('timer-modal')"><i class="fas fa-times"></i></button>
            </div>
            <div class="timer-display" id="timer-display">00:00</div>
            <div class="timer-quick-adds">
                <button onclick="addTime(30)">+30s</button>
                <button onclick="addTime(60)">+1m</button>
                <button onclick="addTime(120)">+2m</button>
            </div>
            <div class="action-row" style="grid-template-columns: 1fr 1fr;">
                <button class="secondary-btn" onclick="resetTimer()">RESET</button>
                <button class="action-btn add-btn" id="timer-start-btn" onclick="toggleTimer()">START</button>
            </div>
        </div>
    </div>

    <div id="calc-modal" class="modal-overlay" style="display:none;">
        <div class="glass-panel modal-panel">
            <div class="modal-header">
                <h2>MATH</h2>
                <button class="close-btn" onclick="closeModal('calc-modal')"><i class="fas fa-times"></i></button>
            </div>
            <div class="calc-screen" id="calc-screen">0</div>
            <div class="basic-calc-grid">
                <button class="calc-btn dark" onclick="calcPress('C')">C</button>
                <button class="calc-btn dark" onclick="calcPress('DEL')">DEL</button>
                <button class="calc-btn dark" onclick="calcPress('/')">/</button>
                <button class="calc-btn dark" onclick="calcPress('*')">x</button>
                
                <button class="calc-btn" onclick="calcPress('7')">7</button>
                <button class="calc-btn" onclick="calcPress('8')">8</button>
                <button class="calc-btn" onclick="calcPress('9')">9</button>
                <button class="calc-btn dark" onclick="calcPress('-')">-</button>
                
                <button class="calc-btn" onclick="calcPress('4')">4</button>
                <button class="calc-btn" onclick="calcPress('5')">5</button>
                <button class="calc-btn" onclick="calcPress('6')">6</button>
                <button class="calc-btn dark" onclick="calcPress('+')">+</button>
                
                <button class="calc-btn" onclick="calcPress('1')">1</button>
                <button class="calc-btn" onclick="calcPress('2')">2</button>
                <button class="calc-btn" onclick="calcPress('3')">3</button>
                <button class="calc-btn blue row-span-2" onclick="calcPress('=')">=</button>
                
                <button class="calc-btn col-span-2" onclick="calcPress('0')">0</button>
                <button class="calc-btn" onclick="calcPress('.')">.</button>
            </div>
        </div>
    </div>
</body>
</html>
